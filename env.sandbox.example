# GoPay IntaSend SANDBOX Configuration
# THIS IS FOR TESTING ONLY - DO NOT USE IN PRODUCTION
# Copy this to .env for sandbox testing: cp env.sandbox.example .env

# Application Settings
BASE_PUBLIC_URL=http://localhost:8000

# Supabase Configuration
# Replace with your actual Supabase credentials
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# IntaSend SANDBOX API Configuration
# Secret Key: Get from IntaSend Dashboard > Settings > API Keys > Sandbox
INTASEND_API_KEY=ISSecretKey_test_YOUR_SECRET_KEY_HERE
# Publishable Key: Provided for frontend integration
INTASEND_PUBLISHABLE_KEY=ISPubKey_test_0afd6a95-8f93-415e-a72b-aab4affe4769

# IntaSend Environment (SANDBOX MODE)
INTASEND_TEST_MODE=true

# IntaSend Webhook Configuration (optional for local testing)
INTASEND_WEBHOOK_SECRET=your-webhook-secret-here

# Platform Fee Configuration
PLATFORM_FEE_PERCENTAGE=0.5
PLATFORM_FEE_FIXED=0

# ============================================
# SANDBOX TESTING GUIDE:
# ============================================
# 
# 1. Test Phone Numbers (M-Pesa Sandbox):
#    - 254722000000 - Successful payment
#    - 254722000001 - Failed payment
#    - 254722000002 - Timeout scenario
#    - 254712345678 - Generic test number
#
# 2. Test Amounts:
#    - Minimum: 10 KES
#    - Maximum: 70,000 KES
#    - Use whole numbers (no decimals)
#
# 3. Test Emails:
#    - Any valid email format works
#    - test@example.com
#    - user@test.com
#
# 4. Sandbox Endpoints:
#    - API Base: https://sandbox.intasend.com/api/
#    - Dashboard: https://sandbox.intasend.com/
#
# 5. Testing Payment Flow:
#    a) Register a driver with test phone number
#    b) Use payment page with test passenger phone
#    c) In sandbox, payment auto-completes (no actual PIN)
#    d) Check logs for webhook notifications
#    e) Verify payout initiated
#    f) Check database for updated records
#
# 6. Webhook Testing Locally:
#    - Use ngrok: ngrok http 8000
#    - Get public URL: https://abc123.ngrok.io
#    - Update webhook in IntaSend dashboard
#    - Format: https://abc123.ngrok.io/api/webhooks/intasend
#
# 7. Troubleshooting:
#    - Check app logs: tail -f app.log
#    - Verify .env file loaded: echo $INTASEND_PUBLISHABLE_KEY
#    - Test API connection: curl IntaSend API
#    - Check database: SELECT * FROM transactions ORDER BY created_at DESC LIMIT 5;
#
# ============================================


